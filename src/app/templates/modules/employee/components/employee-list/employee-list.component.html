<div class="row">
  <div class="col-4">
    <h4>Employee List</h4> 
  </div>
  <div class="col-8">
    <div style="float: right;">
      <button class="create-button" style="float: left; margin-right: 10px; margin-top: 4px;" (click)="addEmployee(addemployee)">
        <span class="fas fa-plus"></span> Add Employee 
      </button>
      <img src="assets/images/print.png" style="margin-right: 10px;" class="img-fluid logo" alt="print"/>
      <img src="assets/images/download.png" class="img-fluid logo" alt="download" />
    </div>
  </div>
</div>

<div class="row">
  <div class="col-12">
    <table class="table" *ngIf="enable">
      <thead>
        <tr>
          <!-- <th class="wid-50px" style="width: 4% !important;"></th> -->
          <th>ID #
              <i *ngIf="!isSortIdDesc" class="sort-by-desc" (click)="sortByOrder('code','desc')"></i>
              <i class="sort-by-asc" *ngIf="!isSortIdAsc" (click)="sortByOrder('code','asc')"></i>
          </th>
          <th>Name
              <i *ngIf="!isSortNameDesc" class="sort-by-desc" (click)="sortByOrder('name','desc')"></i>
              <i class="sort-by-asc" *ngIf="!isSortNameAsc" (click)="sortByOrder('name','asc')"></i>
          </th>
          <th>Designation</th>
          <th>Email</th>
          <th>Joined Date</th>
          <th class="txt-right">Phone</th>
          <th></th>
          <th class="wid-90px">Status</th>
        </tr>
      </thead>
      <tbody *ngFor="let item of employeesDS; let i = index"
        (dblclick)= "router.navigateByUrl('/employment/viewEmployee/'+item.employeecode)"> 
        <tr>
          <!-- <td class="wid-50px" style="width: 4% !important;">
            <img src="assets/images/employee.png" class="img-fluid logo" alt="Employee" />
          </td> -->
          <td>{{item.employeecode}}</td>
          <td>{{item.name}}</td>
          <td>{{item.rank}}</td>
          <td>{{item.email}}</td>
          <td>
            <app-employee-absence *ngIf="isShowHideAbsent[i]" [absenceItem]="item" (closeAbsencePopup)="closePopup($event, i,'absence')" [getAbsentDetail]="getAbsentDetail"></app-employee-absence>
            <app-employee-checkin-checkout *ngIf="isShowHideCheckinCheckout[i]" (closeCheckinCheckoutPopup)="closePopup($event, i,'checkinCheckout')" (enableAbsentIcon)="enableAbsentIcon($event, i)" [absenceItem]="item" [getAbsentDetail]="getAbsentDetail" [currentTime]="todayTime"></app-employee-checkin-checkout>
            {{item.addeddate}}
          </td>
          <td class="txt-right">
            <app-employee-report (closeDailyReport)="closePopup($event, i,'report')" *ngIf="showHideDailyReport[i]" [dailyReportItem]="item" [getDailyReportDetail]="getDailyReportDetail"></app-employee-report>
            {{item.phonenumber}}
          </td>
          <td></td>
          <td class="wid-75px">{{item.status}}
            <span class="edit-delete-icon user-icon">
              <span class="fas fa-list-alt" (click)="dailyReport(i, item)"></span>
              <span class="fas fa-user-clock" (click)="checkinCheckout(i, item)"></span>
              <span class="fas fa-calendar-times" [ngClass]="isAbsentMouseover[i] ? 'absent-disabled' : ''" (mouseover)="absentMouseover(i, item)" (click)="absentPopup(i, item)"></span>
            </span>
          </td>
        </tr>
      </tbody>
    </table>
  </div>
</div>


<ng-template #addemployee let-c="close" let-d="dismiss">
  <div class="modal-header employee-class">
    <!-- <h4 class="modal-title" id="modal-basic-title">Hi there!</h4> -->
    <button type="button" class="close" aria-label="Close" (click)="d('Cross click')">
      <span aria-hidden="true" class="close-x">&times;</span>
    </button>
  </div>
  <div class="modal-body employee-class">
    <div class="container">
      <form name="employeeForm" (ngSubmit)="employeeForm.form.valid && saveEmployee()"
        #employeeForm="ngForm" novalidate>   
        <div class="row">
          <div class="col-4">
            <fieldset class="form-group"> 
              <div class="custom-file fileInputProfileWrap">
                  <p class="error">{{imageError}}</p>
                  <input type="file" (change)="fileChangeEvent($event)" class="fileInputProfile">
                  <div class="img-space">   
                    <ng-container *ngIf="isImageSaved; else elseTemplate">
                        <img [src]="cardImageBase64" />
                    </ng-container>
                    <ng-template #elseTemplate> 
                      <img id="imageplaceholder" src="./../../assets/images/placeholder.png" class="img-responsive"> 
                    </ng-template>
                  </div>
              </div>
            </fieldset>
            <a class="btn btn-danger" (click)="removeImage()" *ngIf="isImageSaved">Remove</a> 
            <div> </div>
          </div>
          <div class="col-4">
            <label class="heading">Employee Name </label>
            <input type="text" name="name" id="textbox1" [(ngModel)]="this.model.name" 
            #name="ngModel" autocomplete="off" required/>

            <div *ngIf="name.errors && (name.dirty || name.touched) ||
              (employeeForm.submitted && !name.valid )">
              <span [hidden]="!name.errors.required" class="spanerror">
                  Required field cannot be left blank
              </span>
            </div>

            <label class="heading">Employee Rank </label>
            <input type="text" name="rank" id="textbox2" [(ngModel)]="this.model.rank" 
              #rank="ngModel" autocomplete="off"/>

            <label class="heading">Phone Number </label>
            <input type="text" name="phonenumber" id="textbox3" [(ngModel)]="this.model.phonenumber" 
              #phonenumber="ngModel" autocomplete="off"/>
      
      
            <label class="heading">Employee Address </label>
            <input type="text" name="address" id="textbox4" [(ngModel)]="this.model.address" 
              #address="ngModel" autocomplete="off"/>
            
            <label class="heading">Employee Email </label>
            <input type="text" name="email" id="textbox5" [(ngModel)]="this.model.email" 
              #email="ngModel" autocomplete="off"/>
            
            <label class="heading">Date of Birth</label>
            <input type="date" name="dob" id="textbox6" [(ngModel)]="this.model.dob" 
              #dob="ngModel" autocomplete="off"/>
    
            <label class="heading">Department Name</label>
            <input type="text" name="departmentname" id="textbox6" [(ngModel)]="this.model.departmentname" 
              #departmentname="ngModel" autocomplete="off" required/>
    
            <div *ngIf="departmentname.errors && (departmentname.dirty || departmentname.touched) ||
              (employeeForm.submitted && !departmentname.valid )">
              <span [hidden]="!departmentname.errors.required" class="spanerror">
                  Required field cannot be left blank
              </span>
            </div>

            <div> </div>

          </div>
          <div class="col-4">
            <label class="heading">Contract Number </label>
            <input type="text" name="contractnumber" id="textbox7" [(ngModel)]="this.model.contractnumber" 
              #contractnumber="ngModel" />
      
            <label class="heading">NPWP Number </label>
            <input type="text" name="npwp" id="textbox8" [(ngModel)]="this.model.npwp" 
              #npwp="ngModel" autocomplete="off"/>
      
            <label class="heading">Employee BPJS </label>
            <input type="text" name="bpjs" id="textbox9" [(ngModel)]="this.model.bpjs" 
              #bpjs="ngModel" autocomplete="off"/>
      
      
            <label class="heading">Monthly Salary </label>
            <input type="text" name="monthlysalary" id="textbox10" [(ngModel)]="this.model.monthlysalary" 
              #monthlysalary="ngModel" autocomplete="off"/>
            
            <label class="heading">Work Hour </label>
            <input type="text" name="workHour" id="textbox11" [(ngModel)]="this.model.workHour" 
              #workHour="ngModel" autocomplete="off"/>
            
                    
            <label class="heading">Annual Leave </label>
            <input type="text" name="annualLeave" id="textbox12" [(ngModel)]="this.model.annualLeave" 
              #annualLeave="ngModel" autocomplete="off"/>

            <label class="heading">Location</label>
            <input type="text" name="location" id="textbox6" [(ngModel)]="this.model.location" 
              #location="ngModel" autocomplete="off"/>
      
            <div> </div>
          </div>
        </div>
        <div class="modal-footer">
          <button id="cancelbtn" (click)="addEmplyeeFields()">Reset</button>
          <button type="submit" class="btn btn-outline-dark">Add</button>
        </div>  
      </form>
    </div>
  </div>
</ng-template>
